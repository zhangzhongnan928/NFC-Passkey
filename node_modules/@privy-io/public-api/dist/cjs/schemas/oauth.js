"use strict";var e=require("zod"),r=require("@privy-io/api-base"),t=require("../constants/oauth.js"),o=require("./account-transfer.js"),i=require("./core.js"),n=require("./user.js");require("bs58"),require("libphonenumber-js/max"),require("viem"),require("./smart-wallet-config.js"),require("../constants/smart-wallets.js");const s=e.z.enum(t.SUPPORTED_OAUTH_PROVIDERS,{invalid_type_error:"Please specify a supported provider.",required_error:"Please specify a supported provider."}),a=s.or(e.z.custom((e=>"string"==typeof e&&/^privy:[a-z0-9]{25}$/i.test(e)),{message:"Please specify a supported provider."})),u=e.z.object({authorization_code:e.z.string(),state_code:e.z.string(),code_verifier:e.z.string().min(43).max(128).optional(),code_type:e.z.enum(["raw"]).optional()}).merge(i.AuthenticateMode).catch((()=>{throw new r.UnauthorizedError("Please specify authorization_code and state_code.",r.PrivyErrorCode.INVALID_CREDENTIALS)})),p=e.z.object({redirect_to:e.z.string({required_error:"Please provide a redirect_to value."}),provider:a,token:e.z.string().optional(),state_code:e.z.string().optional(),code_challenge:e.z.string().optional()}),c=e.z.object({authorization_code:e.z.string(),state_code:e.z.string(),code_verifier:e.z.string().min(43).max(128).optional(),code_type:e.z.enum(["raw"]).optional()}),l=e.z.object({subject:e.z.string(),provider:a}),d=e.z.object({url:e.z.string()}),z=n.User.extend({oauth_tokens:n.OAuthTokens.optional()}),_=o.BaseAccountTransferInput.extend({userInfo:e.z.object({subject:e.z.string(),name:e.z.string().optional(),username:e.z.string().optional(),profilePictureUrl:e.z.string().optional(),email:e.z.string().optional().nullable(),vanityName:e.z.string().optional()})});exports.SUPPORTED_OAUTH_PROVIDERS=t.SUPPORTED_OAUTH_PROVIDERS,exports.AuthenticateOauthInput=u,exports.ExternalOAuthProvider=s,exports.LinkOAuthInput=c,exports.OAuthInitInput=p,exports.OAuthInitResponse=d,exports.OAuthLinkResponse=z,exports.OAuthProvider=a,exports.OAuthUnlinkInput=l,exports.TransferOAuthInput=_;
