"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@privy-io/public-api"),t=require("./maybeCreateWalletOnLogin.js");require("../../utils/getUserEmbeddedEthereumWallet.js"),require("../../utils/getAllUserEmbeddedEthereumWallets.js"),require("../../utils/getUserEmbeddedSolanaWallet.js"),require("../../utils/getAllUserEmbeddedSolanaWallets.js"),require("../../utils/shouldCreateEmbeddedEthWallet.js"),require("../../utils/shouldCreateEmbeddedSolWallet.js");exports.default=class{async initializeAuth({relyingParty:t,redirectUrl:r,token:a}){return await this._privyInternal.fetch(e.FarcasterInit,{body:{relying_party:t,redirect_url:r,token:a}})}async getFarcasterStatus({channel_token:t}){return await this._privyInternal.fetch(e.FarcasterStatus,{headers:{"farcaster-channel-token":t}})}async authenticate({channel_token:r,message:a,signature:i,fid:s,mode:n},l){let d=await this._privyInternal.fetch(e.FarcasterAuthenticate,{body:{channel_token:r,message:a,signature:i,fid:s,mode:n}});await this._privyInternal.session.updateWithTokensResponse(d);let u=await t.maybeCreateWalletOnLogin(this._embedded,d,l?.embedded);return this._privyInternal.callbacks?.setUser?.(u.user),u}async link({channel_token:t,message:r,signature:a,fid:i}){await this._privyInternal.fetch(e.FarcasterLink,{body:{channel_token:t,message:r,signature:a,fid:i}});let s=await this._privyInternal.refreshSession();return{user:s.user,identity_token:s.identity_token}}async unlink({fid:t}){await this._privyInternal.fetch(e.FarcasterUnlink,{body:{fid:t}});let r=await this._privyInternal.refreshSession();return{user:r.user,identity_token:r.identity_token}}constructor(e,t){this._privyInternal=e,this._embedded=t}};
