"use strict";var e=require("zod"),t=require("./core.js"),r=require("./smart-wallet-config.js");require("bs58"),require("libphonenumber-js/max"),require("viem"),require("../constants/smart-wallets.js");const i=e.z.object({type:e.z.literal("email"),address:e.z.string(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),l=e.z.object({type:e.z.literal("phone"),number:e.z.string().optional(),phoneNumber:e.z.string(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),n=e.z.object({type:e.z.enum(["wallet","smart_wallet"]),address:e.z.string(),chain_type:e.z.enum(["solana","ethereum"])}),a=e.z.object({type:e.z.literal("wallet"),address:e.z.string(),chain_id:e.z.string().optional(),chain_type:e.z.literal("ethereum"),wallet_client:e.z.literal("unknown"),wallet_client_type:e.z.string().optional(),connector_type:e.z.string().optional(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),s=e.z.object({type:e.z.literal("smart_wallet"),address:e.z.string(),smart_wallet_type:r.SmartWalletProvider,verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),o=e.z.object({type:e.z.literal("wallet"),address:e.z.string(),chain_type:e.z.literal("solana"),wallet_client:e.z.literal("unknown"),wallet_client_type:e.z.string().optional(),connector_type:e.z.string().optional(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),u=e.z.object({type:e.z.literal("farcaster"),fid:e.z.number(),owner_address:t.WalletAddress,username:e.z.string().optional(),display_name:e.z.string().optional(),bio:e.z.string().optional(),profile_picture:e.z.string().optional(),profile_picture_url:e.z.string().optional(),homepage_url:e.z.string().optional(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable(),signer_public_key:e.z.string().optional()}),z=e.z.object({type:e.z.literal("passkey"),created_with_browser:e.z.string().optional(),created_with_os:e.z.string().optional(),created_with_device:e.z.string().optional(),credential_id:e.z.string(),authenticator_name:e.z.string().optional(),enrolled_in_mfa:e.z.boolean(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),_=e.z.object({type:e.z.literal("telegram"),telegram_user_id:e.z.string(),first_name:e.z.string().nullish(),last_name:e.z.string().nullish(),username:e.z.string().nullish(),photo_url:e.z.string().nullish(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}).transform((e=>({...e,telegramUserId:e.telegram_user_id,firstName:e.first_name})));let b=e.z.enum(["privy","user-passcode","google-drive","icloud","recovery-encryption-key","privy-v2"]),c=e.z.object({id:e.z.string().nullable().default(null),type:e.z.literal("wallet"),address:e.z.string(),imported:e.z.boolean().default(!1),delegated:e.z.boolean().default(!1),wallet_index:e.z.number(),chain_id:e.z.string(),chain_type:e.z.string(),wallet_client:e.z.literal("privy"),wallet_client_type:e.z.literal("privy"),connector_type:e.z.literal("embedded"),recovery_method:b,verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()});const d=c.merge(e.z.object({chain_type:e.z.literal("ethereum")})),p=c.merge(e.z.object({chain_type:e.z.literal("solana"),public_key:e.z.string()})),m=c.merge(e.z.object({chain_type:e.z.literal("bitcoin-segwit"),public_key:e.z.string()})),g=c.merge(e.z.object({chain_type:e.z.literal("bitcoin-taproot"),public_key:e.z.string()}));let f=e.z.object({id:e.z.string(),recovery_method:e.z.literal("privy-v2")});const v=e.z.union([d.merge(f),p.merge(f),m.merge(f),g.merge(f)]),y=e.z.object({type:e.z.literal("google_oauth"),subject:e.z.string(),email:e.z.string(),name:e.z.string().nullable(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),h=e.z.object({type:e.z.literal("twitter_oauth"),subject:e.z.string(),username:e.z.string().nullable(),name:e.z.string().nullable(),profile_picture_url:e.z.string().nullable(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),j=e.z.object({type:e.z.literal("discord_oauth"),subject:e.z.string(),username:e.z.string().nullable(),email:e.z.string().nullable(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),x=e.z.object({type:e.z.literal("github_oauth"),subject:e.z.string(),username:e.z.string().nullable(),name:e.z.string().nullable(),email:e.z.string().nullable(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),k=e.z.object({type:e.z.literal("linkedin_oauth"),subject:e.z.string(),name:e.z.string().optional(),email:e.z.string().nullable(),vanity_name:e.z.string().optional(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),A=e.z.object({type:e.z.literal("spotify_oauth"),subject:e.z.string(),email:e.z.string().nullable(),name:e.z.string().nullable(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),w=e.z.object({type:e.z.literal("instagram_oauth"),subject:e.z.string(),username:e.z.string().nullable(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),W=e.z.object({type:e.z.literal("tiktok_oauth"),subject:e.z.string(),username:e.z.string().nullable(),name:e.z.string().nullable(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),O=e.z.object({type:e.z.literal("apple_oauth"),subject:e.z.string(),email:e.z.string().nullable(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),M=e.z.object({type:e.z.literal("custom_auth"),custom_user_id:e.z.string(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),E=e.z.object({address:e.z.string()}),S=e.z.object({address:e.z.string()}),U=e.z.object({type:e.z.literal("cross_app"),subject:e.z.string(),provider_app_id:e.z.string(),embedded_wallets:e.z.array(E),smart_wallets:e.z.array(S),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),q=e.z.object({type:e.z.literal("authorization_key"),public_key:e.z.string(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),T=e.z.union([i,l,a,o,s,d,p,m,g,y,h,j,x,A,w,W,k,O,M,u,z,_,U,q]),C=e.z.object({type:e.z.literal("sms"),verified_at:e.z.number()}),I=e.z.object({type:e.z.literal("totp"),verified_at:e.z.number()}),L=e.z.object({type:e.z.literal("passkey"),verified_at:e.z.number()}),P=e.z.union([C,I,L]),B=e.z.record(e.z.string(),e.z.union([e.z.string(),e.z.number(),e.z.boolean()])),G=e.z.object({provider:e.z.string(),access_token:e.z.string(),access_token_expires_in_seconds:e.z.number().optional(),refresh_token:e.z.string().optional(),refresh_token_expires_in_seconds:e.z.number().optional(),scopes:e.z.array(e.z.string()).optional()}),N=e.z.object({id:e.z.string(),linked_accounts:e.z.array(T),mfa_methods:e.z.array(P),created_at:e.z.number(),has_accepted_terms:e.z.boolean(),is_guest:e.z.boolean(),custom_metadata:B.optional()}),D=e.z.enum(["set","ignore","clear"]),F=e.z.object({user:N,identity_token:e.z.string().min(1).nullable()}),J=e.z.object({user:N,token:e.z.string().min(1).nullable(),privy_access_token:e.z.string().min(1).nullable(),refresh_token:e.z.string().min(1).nullable(),identity_token:e.z.string().min(1).optional(),is_new_user:e.z.boolean().optional(),oauth_tokens:G.optional(),oauth_provider_tokens:e.z.object({provider:e.z.string(),access_token:e.z.string(),access_token_expires_in_seconds:e.z.number().optional(),refresh_token:e.z.string().optional(),scopes:e.z.array(e.z.string()).optional()}).optional(),session_update_action:D}),K=e.z.object({user:e.z.null(),token:e.z.null(),refresh_token:e.z.null(),session_update_action:e.z.literal(D.Values.clear)}),V=e.z.union([J,K]);exports.AppleOauthAccount=O,exports.AuthenticatedUser=J,exports.AuthorizationKeyAccount=q,exports.BaseWalletAccount=n,exports.BitcoinSegwitEmbeddedWalletAccount=m,exports.BitcoinTaprootEmbeddedWalletAccount=g,exports.CrossAppAccount=U,exports.CrossAppEmbeddedWallet=E,exports.CrossAppSmartWallet=S,exports.CustomJwtAccount=M,exports.CustomMetadata=B,exports.DiscordOauthAccount=j,exports.EmailAccount=i,exports.EthereumAccount=a,exports.EthereumEmbeddedWalletAccount=d,exports.FarcasterAccount=u,exports.GithubOauthAccount=x,exports.GoogleOauthAccount=y,exports.InstagramOauthAccount=w,exports.LinkedAccount=T,exports.LinkedInOauthAccount=k,exports.LinkedMfaMethod=P,exports.LoggedOutUser=K,exports.MaybeUser=V,exports.OAuthTokens=G,exports.PasskeyAccount=z,exports.PasskeyMfaMethod=L,exports.PhoneAccount=l,exports.SessionUpdateActionEnum=D,exports.SmartWalletAccount=s,exports.SmsMfaMethod=C,exports.SolanaAccount=o,exports.SolanaEmbeddedWalletAccount=p,exports.SpotifyOauthAccount=A,exports.TelegramAccount=_,exports.TiktokOauthAccount=W,exports.TotpMfaMethod=I,exports.TwitterOauthAccount=h,exports.UnifiedWalletAccount=v,exports.User=N,exports.UserWithIdentityToken=F;
