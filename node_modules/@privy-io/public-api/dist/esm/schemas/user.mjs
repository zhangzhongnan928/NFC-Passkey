import{z as e}from"zod";import{WalletAddress as t}from"./core.mjs";import{SmartWalletProvider as i}from"./smart-wallet-config.mjs";import"bs58";import"libphonenumber-js/max";import"viem";import"../constants/smart-wallets.mjs";const r=e.object({type:e.literal("email"),address:e.string(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),l=e.object({type:e.literal("phone"),number:e.string().optional(),phoneNumber:e.string(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),n=e.object({type:e.enum(["wallet","smart_wallet"]),address:e.string(),chain_type:e.enum(["solana","ethereum"])}),a=e.object({type:e.literal("wallet"),address:e.string(),chain_id:e.string().optional(),chain_type:e.literal("ethereum"),wallet_client:e.literal("unknown"),wallet_client_type:e.string().optional(),connector_type:e.string().optional(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),s=e.object({type:e.literal("smart_wallet"),address:e.string(),smart_wallet_type:i,verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),o=e.object({type:e.literal("wallet"),address:e.string(),chain_type:e.literal("solana"),wallet_client:e.literal("unknown"),wallet_client_type:e.string().optional(),connector_type:e.string().optional(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),_=e.object({type:e.literal("farcaster"),fid:e.number(),owner_address:t,username:e.string().optional(),display_name:e.string().optional(),bio:e.string().optional(),profile_picture:e.string().optional(),profile_picture_url:e.string().optional(),homepage_url:e.string().optional(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable(),signer_public_key:e.string().optional()}),u=e.object({type:e.literal("passkey"),created_with_browser:e.string().optional(),created_with_os:e.string().optional(),created_with_device:e.string().optional(),credential_id:e.string(),authenticator_name:e.string().optional(),enrolled_in_mfa:e.boolean(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),b=e.object({type:e.literal("telegram"),telegram_user_id:e.string(),first_name:e.string().nullish(),last_name:e.string().nullish(),username:e.string().nullish(),photo_url:e.string().nullish(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}).transform((e=>({...e,telegramUserId:e.telegram_user_id,firstName:e.first_name})));let m=e.enum(["privy","user-passcode","google-drive","icloud","recovery-encryption-key","privy-v2"]),d=e.object({id:e.string().nullable().default(null),type:e.literal("wallet"),address:e.string(),imported:e.boolean().default(!1),delegated:e.boolean().default(!1),wallet_index:e.number(),chain_id:e.string(),chain_type:e.string(),wallet_client:e.literal("privy"),wallet_client_type:e.literal("privy"),connector_type:e.literal("embedded"),recovery_method:m,verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()});const c=d.merge(e.object({chain_type:e.literal("ethereum")})),p=d.merge(e.object({chain_type:e.literal("solana"),public_key:e.string()})),g=d.merge(e.object({chain_type:e.literal("bitcoin-segwit"),public_key:e.string()})),f=d.merge(e.object({chain_type:e.literal("bitcoin-taproot"),public_key:e.string()}));let v=e.object({id:e.string(),recovery_method:e.literal("privy-v2")});const y=e.union([c.merge(v),p.merge(v),g.merge(v),f.merge(v)]),j=e.object({type:e.literal("google_oauth"),subject:e.string(),email:e.string(),name:e.string().nullable(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),h=e.object({type:e.literal("twitter_oauth"),subject:e.string(),username:e.string().nullable(),name:e.string().nullable(),profile_picture_url:e.string().nullable(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),k=e.object({type:e.literal("discord_oauth"),subject:e.string(),username:e.string().nullable(),email:e.string().nullable(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),w=e.object({type:e.literal("github_oauth"),subject:e.string(),username:e.string().nullable(),name:e.string().nullable(),email:e.string().nullable(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),x=e.object({type:e.literal("linkedin_oauth"),subject:e.string(),name:e.string().optional(),email:e.string().nullable(),vanity_name:e.string().optional(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),z=e.object({type:e.literal("spotify_oauth"),subject:e.string(),email:e.string().nullable(),name:e.string().nullable(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),N=e.object({type:e.literal("instagram_oauth"),subject:e.string(),username:e.string().nullable(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),I=e.object({type:e.literal("tiktok_oauth"),subject:e.string(),username:e.string().nullable(),name:e.string().nullable(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),U=e.object({type:e.literal("apple_oauth"),subject:e.string(),email:e.string().nullable(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),V=e.object({type:e.literal("custom_auth"),custom_user_id:e.string(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),q=e.object({address:e.string()}),A=e.object({address:e.string()}),B=e.object({type:e.literal("cross_app"),subject:e.string(),provider_app_id:e.string(),embedded_wallets:e.array(q),smart_wallets:e.array(A),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),C=e.object({type:e.literal("authorization_key"),public_key:e.string(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),D=e.union([r,l,a,o,s,c,p,g,f,j,h,k,w,z,N,I,x,U,V,_,u,b,B,C]),E=e.object({type:e.literal("sms"),verified_at:e.number()}),F=e.object({type:e.literal("totp"),verified_at:e.number()}),G=e.object({type:e.literal("passkey"),verified_at:e.number()}),H=e.union([E,F,G]),J=e.record(e.string(),e.union([e.string(),e.number(),e.boolean()])),K=e.object({provider:e.string(),access_token:e.string(),access_token_expires_in_seconds:e.number().optional(),refresh_token:e.string().optional(),refresh_token_expires_in_seconds:e.number().optional(),scopes:e.array(e.string()).optional()}),L=e.object({id:e.string(),linked_accounts:e.array(D),mfa_methods:e.array(H),created_at:e.number(),has_accepted_terms:e.boolean(),is_guest:e.boolean(),custom_metadata:J.optional()}),M=e.enum(["set","ignore","clear"]),O=e.object({user:L,identity_token:e.string().min(1).nullable()}),P=e.object({user:L,token:e.string().min(1).nullable(),privy_access_token:e.string().min(1).nullable(),refresh_token:e.string().min(1).nullable(),identity_token:e.string().min(1).optional(),is_new_user:e.boolean().optional(),oauth_tokens:K.optional(),oauth_provider_tokens:e.object({provider:e.string(),access_token:e.string(),access_token_expires_in_seconds:e.number().optional(),refresh_token:e.string().optional(),scopes:e.array(e.string()).optional()}).optional(),session_update_action:M}),Q=e.object({user:e.null(),token:e.null(),refresh_token:e.null(),session_update_action:e.literal(M.Values.clear)}),R=e.union([P,Q]);export{U as AppleOauthAccount,P as AuthenticatedUser,C as AuthorizationKeyAccount,n as BaseWalletAccount,g as BitcoinSegwitEmbeddedWalletAccount,f as BitcoinTaprootEmbeddedWalletAccount,B as CrossAppAccount,q as CrossAppEmbeddedWallet,A as CrossAppSmartWallet,V as CustomJwtAccount,J as CustomMetadata,k as DiscordOauthAccount,r as EmailAccount,a as EthereumAccount,c as EthereumEmbeddedWalletAccount,_ as FarcasterAccount,w as GithubOauthAccount,j as GoogleOauthAccount,N as InstagramOauthAccount,D as LinkedAccount,x as LinkedInOauthAccount,H as LinkedMfaMethod,Q as LoggedOutUser,R as MaybeUser,K as OAuthTokens,u as PasskeyAccount,G as PasskeyMfaMethod,l as PhoneAccount,M as SessionUpdateActionEnum,s as SmartWalletAccount,E as SmsMfaMethod,o as SolanaAccount,p as SolanaEmbeddedWalletAccount,z as SpotifyOauthAccount,b as TelegramAccount,I as TiktokOauthAccount,F as TotpMfaMethod,h as TwitterOauthAccount,y as UnifiedWalletAccount,L as User,O as UserWithIdentityToken};
